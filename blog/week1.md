# 开发周报

## 概览

* 基本完成需求分析与设计，并完成第一阶段编码工作
* 明确代码质量管理工具：[black](https://pypi.org/project/black/)、[pylint](https://www.pylint.org/)
* 明确代码测试工具：[pytest](https://docs.pytest.org/en/6.2.x/)

### ✔️成果

* 地铁线路文本化：录入北京地铁数据，并实现数据处理脚本
* 框架搭建：实现以Station、Line、Edge和SubwaySys的组合
* 算法实现：最短路线算法与/a测试算法实现
* 代码质量与风格：每个模块代码基本全部通过pylint与black检查

### ⚠️问题

* 需求变更不确定 难以实现详细的模块接口设计

* 不清楚性能分析工具的具体框架和分析对象

  

## 进展甘特图

| 任务                         | 状态    | 执行人      | 开始时间 | 截止时间 | 优先级 |
| ---------------------------- | ------- | ----------- | -------- | -------- | ------ |
| SubwaySys函数单元测试    | ✅已完成 | 曾群鸿      | 1.12     |    1.15      | **P1** |
| 更改SubwaySys中邻接表的键    | ✅已完成 | 肖荣誉      | 1.12     |  1.12        | **P0** |
| 模块接口设计                 | ⏳进行中 | 肖誉        | 1.5      |          | **P0** |
| 需求分析与设计               | ⏳进行中 | 曾群鸿 肖誉 | 1.5      |          | **P0** |
| 文本化地铁路线，实现管理脚本 | ✅已完成 | 曾群鸿      | 1.4      | 1.5      | **P1** |
| 初步uml类图设计              | ✅已完成 | 肖誉        | 1.10     |          | **P1** |
| 实现model模块与utils模块     | ✅已完成 | 曾群鸿      | 1.5      | 1.5      | **P1** |
| 实现程序主调用模块           | ✅已完成 | 曾群鸿      | 1.5      | 1.5      | **P1** |
| 明确周报内容，实现模板       | ✅已完成 | 曾群鸿      | 1.9      | 1.9      | **P1** |
| 加入测试相关模块             | ✅已完成 | 肖誉        | 1.8      | 1.8      | **P1** |
| 增加Edge类封装边             | ✅已完成 | 肖誉        | 1.11     | 1.11     | **P1** |
| 格式化输出地铁路线           | ✅已完成 | 曾群鸿      | 1.12     | 1.12     | **P1** |
| 更改测试中的邻接表适配       | ✅已完成 | 肖誉        | 1.11     |  1.13      | **P2** |



## ⭐详细进展

### 1. 文本化地铁路线

* 进展
  * 将北京地铁按照线路保存
  * 实现脚本：将地铁线路文本读出，计算换乘站等信息，以更加容易被程序处理的格式输出到指定文件中

### 2. 实现model模块

* 进展
  * 完成站点Station、地铁线Line、地铁系统SubwaySys类的封装
  * 基本实现了阶段一的功能
* 计划
  * 后续大量需求可能都会向SubwaySys中添加，需要考虑将功能进行拆分
  * SubwaySys中部分数据结构设计需要进行修改，以适应后续功能需求
  * 最短路算法：目前考虑站点距离为1，使用bfs进行搜索，后续如增加距离这一需求或者其他算法要求，更将算法从SubwaySys类中抽离，并使用不同的算法实现

### 3. 实现utils模块

* 进展
  * 实现从地铁路线文本中读取地铁路线列表的功能
* 计划
  * 后续工具类功能都放在该模块中

### 4. 格式化输出地铁路线

* 进展
  * 在Subways中添加decorate函数，当前相当于格式化最短路径的输出结果
* 计划
  * 作为命令行的视图使用，后续的算法输出结果先经过decorate后，输出到用户界面
### 5. 模块接口设计

* 进展
  * 符合直觉的类设计 Subway Sys | Line | Edge | Station 写在model.py中
  * 信息隐藏 & 数据耦合 接口传递尽量使用简单数据结构
* 计划
  * 将Subway Sys中的最短路以及测试方法拆出，减少model模块的大小

### 6. 需求分析

* 进展
  * 地图可以理解为无向图，找有效路径可以转换为边权为1的最短路
  * 地铁特点是没有重复边，因此站与站之间的边属于唯一的一条线路
  * 判断换乘只需知道前后两条边是否属于统一线路
* 计划
  * 边的封装可以扩展更具体到边权、时间等

### 7. 单元测试

* 进展
  * 完成当前model和utils模块中主要函数的单元测试用例设计
  * 完成测试文档（测试使用说明，测试用例规格等）
  * 利用pytest完成测试自动化
  * 每次代码改动向服务器提交代码时执行测试，保证代码质量
* 计划
  * 测试用例不够全面，后续将会动态添加
  * 单元测试需要有owner机制，开发者负责自己模块等单元测试和用例编写

